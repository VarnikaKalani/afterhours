<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> AfterHours - milk & cookies</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --cream: #F7F4EF;
            --warm-beige: #E8DFD4;
            --soft-brown: #A8967A;
            --muted-sage: #B5BAA3;
            --stone: #D4CEC3;
            --dark-neutral: #5A5245;
            --linen: #EDE7DD;
        }

        body {
            font-family: 'Optima', 'Didot', 'Segoe UI', sans-serif;
            background: var(--cream);
            color: var(--dark-neutral);
            line-height: 1.7;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 0 40px;
        }

        /* Navigation */
        nav {
            padding: 30px 0;
            background: var(--linen);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(168, 150, 122, 0.15);
        }

        nav .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 26px;
            font-weight: 400;
            color: var(--dark-neutral);
            letter-spacing: 3px;
            text-transform: lowercase;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 45px;
            align-items: center;
        }

        nav a {
            color: var(--dark-neutral);
            text-decoration: none;
            transition: all 0.4s ease;
            font-size: 14px;
            letter-spacing: 1px;
            text-transform: lowercase;
            font-weight: 400;
        }

        nav a:hover {
            color: var(--soft-brown);
            opacity: 0.7;
        }

        .cart-icon {
            position: relative;
            cursor: pointer;
            font-size: 20px;
            color: var(--dark-neutral);
            transition: all 0.4s ease;
            opacity: 0.8;
        }

        .cart-icon:hover {
            opacity: 1;
            transform: scale(1.05);
        }

        .cart-count {
            position: absolute;
            top: -6px;
            right: -8px;
            background: var(--soft-brown);
            color: var(--cream);
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 500;
            font-family: 'Arial', sans-serif;
        }

        /* Hero Section */
        .hero {
            background: var(--warm-beige);
            padding: 140px 40px 120px;
            text-align: center;
            position: relative;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        h1 {
            font-size: clamp(48px, 7vw, 86px);
            margin-bottom: 30px;
            color: var(--dark-neutral);
            font-weight: 300;
            letter-spacing: -1px;
            line-height: 1.1;
            font-family: 'Optima', serif;
        }

        .hero p {
            font-size: clamp(17px, 2vw, 20px);
            color: var(--soft-brown);
            margin-bottom: 50px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            font-weight: 300;
            letter-spacing: 0.5px;
        }

        .hero-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-primary {
            display: inline-block;
            padding: 18px 50px;
            background: var(--soft-brown);
            color: var(--cream);
            text-decoration: none;
            border-radius: 50px;
            font-size: 15px;
            font-weight: 400;
            letter-spacing: 1.5px;
            transition: all 0.4s ease;
            text-transform: lowercase;
        }

        .btn-primary:hover {
            background: var(--dark-neutral);
            transform: translateY(-1px);
            box-shadow: 0 8px 25px rgba(90, 82, 69, 0.15);
        }

        .btn-secondary {
            display: inline-block;
            padding: 18px 50px;
            background: transparent;
            color: var(--dark-neutral);
            text-decoration: none;
            border-radius: 50px;
            font-size: 15px;
            font-weight: 400;
            letter-spacing: 1.5px;
            transition: all 0.4s ease;
            border: 1.5px solid var(--dark-neutral);
            text-transform: lowercase;
        }

        .btn-secondary:hover {
            background: var(--dark-neutral);
            color: var(--cream);
        }

        /* Featured Section */
        .featured {
            padding: 100px 40px;
            background: var(--cream);
        }

        h2 {
            font-size: clamp(36px, 5vw, 56px);
            margin-bottom: 20px;
            color: var(--dark-neutral);
            text-align: center;
            font-weight: 300;
            letter-spacing: -0.5px;
        }

        .section-subtitle {
            text-align: center;
            color: var(--soft-brown);
            margin-bottom: 80px;
            font-size: 16px;
            line-height: 1.8;
            font-weight: 300;
            letter-spacing: 0.5px;
        }

        /* Product Grid */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 50px;
            margin-top: 60px;
        }

        .product-card {
            background: var(--linen);
            border-radius: 24px;
            overflow: hidden;
            transition: all 0.5s ease;
            border: 1px solid rgba(168, 150, 122, 0.1);
        }

        .product-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 20px 50px rgba(90, 82, 69, 0.08);
        }

        .product-image {
            width: 100%;
            height: 380px;
            background: linear-gradient(135deg, var(--stone) 0%, var(--warm-beige) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: contrast(0.95) brightness(1.05);
        }

        .product-image.emoji-only {
            font-size: 110px;
            filter: grayscale(0.1);
        }

        .product-icon {
            position: relative;
            z-index: 1;
            opacity: 0.9;
        }

        .product-content {
            padding: 40px 35px;
        }

        .product-card h3 {
            font-size: 26px;
            color: var(--dark-neutral);
            margin-bottom: 10px;
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .product-origin {
            font-size: 13px;
            color: var(--soft-brown);
            font-style: italic;
            margin-bottom: 18px;
            letter-spacing: 0.8px;
            font-weight: 300;
        }

        .product-description {
            color: var(--dark-neutral);
            margin-bottom: 18px;
            font-size: 15px;
            line-height: 1.8;
            opacity: 0.85;
            font-weight: 300;
        }

        .wellness-note {
            padding: 18px;
            background: rgba(181, 186, 163, 0.1);
            border-radius: 16px;
            font-size: 14px;
            color: var(--dark-neutral);
            margin-bottom: 25px;
            border-left: 2px solid var(--muted-sage);
            line-height: 1.7;
            font-weight: 300;
        }

        .wellness-note strong {
            color: var(--dark-neutral);
            font-weight: 400;
        }

        .product-price {
            font-size: 32px;
            color: var(--dark-neutral);
            font-weight: 300;
            margin: 20px 0;
            letter-spacing: -0.5px;
        }

        .product-options {
            margin: 25px 0;
        }

        .option-label {
            display: block;
            font-size: 13px;
            color: var(--dark-neutral);
            margin-bottom: 12px;
            font-weight: 400;
            letter-spacing: 1px;
            text-transform: lowercase;
        }

        .temp-selector, .sweetness-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 18px;
        }

        .option-btn {
            flex: 1;
            padding: 14px;
            background: var(--cream);
            border: 1.5px solid rgba(168, 150, 122, 0.3);
            border-radius: 30px;
            color: var(--dark-neutral);
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .option-btn:hover {
            background: var(--warm-beige);
            border-color: var(--soft-brown);
        }

        .option-btn.active {
            background: var(--soft-brown);
            border-color: var(--soft-brown);
            color: var(--cream);
        }

        .add-to-cart {
            width: 100%;
            padding: 18px;
            background: var(--soft-brown);
            color: var(--cream);
            border: none;
            border-radius: 50px;
            font-size: 15px;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.4s ease;
            letter-spacing: 1.5px;
            text-transform: lowercase;
        }

        .add-to-cart:hover {
            background: var(--dark-neutral);
            transform: translateY(-1px);
            box-shadow: 0 8px 20px rgba(90, 82, 69, 0.15);
        }

        /* Add to cart animation */
        @keyframes itemAdded {
            0% { transform: scale(1); }
            50% { transform: scale(0.97); }
            100% { transform: scale(1); }
        }

        .add-to-cart.added {
            animation: itemAdded 0.4s ease;
            background: var(--muted-sage);
        }

        /* Cart notification */
        .cart-notification {
            position: fixed;
            top: 90px;
            right: 30px;
            background: var(--soft-brown);
            color: var(--cream);
            padding: 18px 30px;
            border-radius: 50px;
            box-shadow: 0 8px 30px rgba(90, 82, 69, 0.2);
            z-index: 2001;
            transform: translateX(400px);
            transition: transform 0.5s ease;
            font-size: 14px;
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .cart-notification.show {
            transform: translateX(0);
        }

        /* Bundles Section */
        .bundles {
            padding: 100px 40px;
            background: var(--warm-beige);
        }

        .bundle-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
            margin-top: 60px;
        }

        .bundle-card {
            background: var(--linen);
            border-radius: 24px;
            padding: 45px;
            border: 1.5px solid rgba(168, 150, 122, 0.2);
            position: relative;
            transition: all 0.5s ease;
        }

        .bundle-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 20px 50px rgba(90, 82, 69, 0.08);
        }

        .bundle-badge {
            position: absolute;
            top: -14px;
            right: 30px;
            background: var(--soft-brown);
            color: var(--cream);
            padding: 8px 22px;
            border-radius: 30px;
            font-size: 11px;
            font-weight: 400;
            letter-spacing: 1.5px;
            text-transform: lowercase;
        }

        .bundle-card h3 {
            font-size: 28px;
            color: var(--dark-neutral);
            margin-bottom: 20px;
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .bundle-items {
            margin: 25px 0;
            color: var(--dark-neutral);
            line-height: 2;
            font-weight: 300;
        }

        .bundle-items li {
            margin-left: 20px;
            margin-bottom: 12px;
            opacity: 0.85;
        }

        .bundle-price {
            font-size: 36px;
            color: var(--dark-neutral);
            font-weight: 300;
            margin: 25px 0;
            letter-spacing: -0.5px;
        }

        .bundle-price span {
            font-size: 18px;
            text-decoration: line-through;
            opacity: 0.5;
            margin-left: 12px;
        }

        .cart-controls {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 14px;
}

.qty-control {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  background: var(--cream);
  border: 1px solid rgba(168, 150, 122, 0.18);
  border-radius: 999px;
  padding: 8px 12px;
}

.qty-btn {
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: 1px solid rgba(168, 150, 122, 0.22);
  background: var(--linen);
  color: var(--dark-neutral);
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 14px;
  line-height: 1;
}

.qty-btn:hover {
  background: var(--warm-beige);
  border-color: rgba(168, 150, 122, 0.35);
}

.qty-num {
  min-width: 22px;
  text-align: center;
  font-size: 14px;
  color: var(--dark-neutral);
  opacity: 0.85;
}

.mini-edit {
  display: inline-flex;
  gap: 8px;
  flex-wrap: wrap;
}

.mini-pill {
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid rgba(168, 150, 122, 0.22);
  background: var(--linen);
  color: var(--dark-neutral);
  cursor: pointer;
  font-size: 12px;
  letter-spacing: 0.4px;
  transition: all 0.2s ease;
}

.mini-pill:hover {
  background: var(--warm-beige);
}

.mini-pill.active {
  background: var(--soft-brown);
  border-color: var(--soft-brown);
  color: var(--cream);
}

.edit-link {
  background: none;
  border: none;
  color: var(--soft-brown);
  cursor: pointer;
  font-size: 13px;
  text-decoration: underline;
  font-weight: 300;
  opacity: 0.85;
  padding: 0;
}

.edit-link:hover {
  color: var(--dark-neutral);
  opacity: 1;
}


        /* Shopping Cart Sidebar */
        .cart-sidebar {
            position: fixed;
            right: -450px;
            top: 0;
            width: 450px;
            height: 100vh;
            background: var(--linen);
            box-shadow: -8px 0 40px rgba(90, 82, 69, 0.12);
            transition: right 0.5s ease;
            z-index: 2000;
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.open {
            right: 0;
        }

        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(90, 82, 69, 0.4);
            display: none;
            z-index: 1999;
            backdrop-filter: blur(4px);
        }

        .cart-overlay.active {
            display: block;
        }

        .cart-header {
            padding: 35px;
            background: var(--warm-beige);
            color: var(--dark-neutral);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(168, 150, 122, 0.15);
        }

        .cart-header h3 {
            font-size: 24px;
            font-weight: 400;
            letter-spacing: 1px;
            text-transform: lowercase;
        }

        .close-cart {
            background: none;
            border: none;
            color: var(--dark-neutral);
            font-size: 28px;
            cursor: pointer;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            opacity: 0.7;
        }

        .close-cart:hover {
            background: rgba(168, 150, 122, 0.1);
            opacity: 1;
        }

        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
        }

        .cart-item {
            padding: 25px;
            background: var(--cream);
            border-radius: 20px;
            margin-bottom: 18px;
            border: 1px solid rgba(168, 150, 122, 0.1);
        }

        .cart-item h4 {
            color: var(--dark-neutral);
            margin-bottom: 12px;
            font-size: 18px;
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .cart-item-details {
            font-size: 13px;
            color: var(--soft-brown);
            margin-bottom: 15px;
            line-height: 1.7;
            font-weight: 300;
        }

        .cart-item-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }

        .cart-item-price span {
            font-size: 22px;
            font-weight: 300;
            color: var(--dark-neutral);
        }

        .remove-item {
            background: none;
            border: none;
            color: var(--soft-brown);
            cursor: pointer;
            font-size: 13px;
            text-decoration: underline;
            transition: color 0.3s;
            font-weight: 300;
            opacity: 0.8;
        }

        .remove-item:hover {
            color: var(--dark-neutral);
            opacity: 1;
        }

        .cart-footer {
            padding: 35px;
            background: var(--stone);
            border-top: 1px solid rgba(168, 150, 122, 0.15);
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 26px;
            font-weight: 300;
            color: var(--dark-neutral);
            margin-bottom: 25px;
            letter-spacing: 0.5px;
        }

        .checkout-btn {
            width: 100%;
            padding: 18px;
            background: var(--soft-brown);
            color: var(--cream);
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.4s ease;
            letter-spacing: 1.5px;
            text-transform: lowercase;
        }

        .checkout-btn:hover {
            background: var(--dark-neutral);
            transform: translateY(-1px);
        }

        .empty-cart {
            text-align: center;
            padding: 80px 30px;
            color: var(--soft-brown);
            font-weight: 300;
        }

        /* Bundle Modal */
        .bundle-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(90, 82, 69, 0.6);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            padding: 30px;
            backdrop-filter: blur(6px);
        }

        .bundle-modal.active {
            display: flex;
        }

        .bundle-modal-content {
            background: var(--linen);
            border-radius: 28px;
            padding: 50px;
            max-width: 750px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .bundle-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 1.5px solid rgba(168, 150, 122, 0.2);
        }

        .bundle-modal-header h3 {
            font-size: 30px;
            color: var(--dark-neutral);
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 32px;
            color: var(--soft-brown);
            cursor: pointer;
            transition: all 0.3s;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            opacity: 0.7;
        }

        .close-modal:hover {
            background: var(--cream);
            opacity: 1;
        }

        .bundle-selection {
            margin-bottom: 35px;
        }

        .bundle-selection h4 {
            font-size: 20px;
            color: var(--dark-neutral);
            margin-bottom: 18px;
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .milk-selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .milk-select-card {
            background: var(--cream);
            border: 1.5px solid transparent;
            border-radius: 18px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .milk-select-card:hover {
            border-color: var(--soft-brown);
            background: var(--warm-beige);
        }

        .milk-select-card.selected {
            border-color: var(--soft-brown);
            background: var(--soft-brown);
        }

        .milk-select-card.selected .milk-select-name {
            color: var(--cream);
        }

        .milk-select-icon {
            font-size: 42px;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .milk-select-name {
            font-size: 13px;
            color: var(--dark-neutral);
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .selected-count {
            display: inline-block;
            background: var(--soft-brown);
            color: var(--cream);
            padding: 6px 18px;
            border-radius: 30px;
            font-size: 13px;
            font-weight: 400;
            margin-left: 12px;
            letter-spacing: 0.5px;
        }

        .bundle-customization {
            background: var(--cream);
            padding: 25px;
            border-radius: 18px;
            margin-bottom: 18px;
        }

        .customization-title {
            font-size: 16px;
            color: var(--dark-neutral);
            font-weight: 400;
            margin-bottom: 15px;
            letter-spacing: 0.5px;
        }

        .bundle-temp-selector, .bundle-sweet-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .bundle-modal-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 30px;
            border-top: 1.5px solid rgba(168, 150, 122, 0.2);
        }

        .bundle-total {
            font-size: 36px;
            font-weight: 300;
            color: var(--dark-neutral);
            letter-spacing: -0.5px;
        }

        .add-bundle-btn {
            padding: 18px 45px;
            background: var(--soft-brown);
            color: var(--cream);
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.4s ease;
            letter-spacing: 1.5px;
            text-transform: lowercase;
        }

        .add-bundle-btn:hover {
            background: var(--dark-neutral);
            transform: translateY(-1px);
        }

        .add-bundle-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .selection-error {
            color: var(--dark-neutral);
            background: rgba(168, 150, 122, 0.15);
            padding: 15px;
            border-radius: 12px;
            margin-top: 12px;
            font-size: 14px;
            font-weight: 300;
        }

        /* About Section */
        .about {
            padding: 100px 40px;
            background: var(--stone);
            color: var(--dark-neutral);
        }

        .about h2 {
            color: var(--dark-neutral);
        }

        .about-content {
            max-width: 750px;
            margin: 50px auto;
            text-align: center;
            font-size: 17px;
            line-height: 2;
            font-weight: 300;
        }

        .about-quote {
            font-size: 28px;
            font-style: italic;
            color: var(--soft-brown);
            margin: 50px 0;
            line-height: 1.7;
            font-weight: 300;
        }

        /* Waitlist Section */
        .waitlist-section {
            background: var(--warm-beige);
        }

        .waitlist-section input {
            background: var(--linen);
            border: 1.5px solid rgba(168, 150, 122, 0.2);
            font-family: 'Optima', 'Segoe UI', sans-serif;
            color: var(--dark-neutral);
            transition: all 0.3s ease;
        }

        .waitlist-section input:focus {
            outline: none;
            border-color: var(--soft-brown);
            background: var(--cream);
        }

        .waitlist-section button:hover {
            background: var(--dark-neutral);
            transform: translateY(-1px);
        }

        /* Footer */
        footer {
            padding: 80px 40px 40px;
            background: var(--linen);
            color: var(--dark-neutral);
            text-align: center;
            border-top: 1px solid rgba(168, 150, 122, 0.15);
        }

        footer a {
            color: var(--soft-brown);
            text-decoration: none;
            transition: all 0.3s;
            font-weight: 300;
        }

        footer a:hover {
            color: var(--dark-neutral);
            opacity: 0.7;
        }

        .footer-links {
            margin: 35px 0;
            display: flex;
            justify-content: center;
            gap: 35px;
            flex-wrap: wrap;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 0 25px;
            }

            .cart-sidebar {
                width: 100%;
                right: -100%;
            }

            nav ul {
                gap: 25px;
            }

            .product-grid {
                grid-template-columns: 1fr;
            }

            .bundle-grid {
                grid-template-columns: 1fr;
            }

            .hero {
                padding: 100px 25px 80px;
            }

            .featured, .bundles, .about {
                padding: 70px 25px;
            }

            .milk-selection-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Cart Notification -->
    <div class="cart-notification" id="cartNotification">
        ‚úì Added to cart!
    </div>

    <!-- Navigation -->
    <nav>
        <div class="container">
            <div class="logo">AfterHours</div>
            <ul>
                <li><a href="#shop">Shop</a></li>
                <li><a href="#bundles">Bundles</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#waitlist">Waitlist</a></li>
                <li>
                    <div class="cart-icon" onclick="toggleCart()">
                        üõí
                        <span class="cart-count" id="cartCount">0</span>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>milk & cookies,<br>delivered warm</h1>
            <p>comfort for quiet nights, long thoughts, and midnight cravings</p>
            <div class="hero-buttons">
                <a href="#shop" class="btn-primary">order now</a>
                <a href="#bundles" class="btn-secondary">view bundles</a>
            </div>
        </div>
    </section>

    <!-- Featured Products Section -->
    <section class="featured" id="shop">
        <div class="container">
            <h2>our milk traditions</h2>
            <p class="section-subtitle">every milk available hot or cold ¬∑ sweetness customizable<br>includes signature cookie pairing option</p>
            
            <div class="product-grid" id="productGrid">
                <!-- Products will be dynamically loaded -->
            </div>
        </div>
    </section>

    <section class="bundles" id="bundles">
        <div class="container">
          <h2>comfort bundles</h2>
          <p class="section-subtitle">curated sets for every late-night ritual</p>
      
          <div class="bundle-grid">
      
            <div class="bundle-card">
              <span class="bundle-badge">SAVE ‚Çπ300</span>
              <h3>Midnight Comfort</h3>
              <ul class="bundle-items">
                <li>2 milks of your choice (hot or cold)</li>
                <li>2 signature chocolate chip cookies</li>
                <li>Perfect for sharing or savoring slowly</li>
              </ul>
              <div class="bundle-price">‚Çπ1700 <span>‚Çπ2000</span></div>
              <button class="add-to-cart" onclick="openBundleModal('Midnight Comfort Set', 2, 2, 1700)">Customize Bundle</button>
            </div>
      
            <div class="bundle-card">
              <span class="bundle-badge">SAVE ‚Çπ600</span>
              <h3>Study Night</h3>
              <ul class="bundle-items">
                <li>3 milks (mix hot & cold)</li>
                <li>4 cookies</li>
                <li>Fuel for long nights of focus</li>
              </ul>
              <div class="bundle-price">‚Çπ2700 <span>‚Çπ3300</span></div>
              <button class="add-to-cart" onclick="openBundleModal('Study Night Kit', 3, 4, 2700)">Customize Bundle</button>
            </div>
      
            <div class="bundle-card">
              <span class="bundle-badge">BEST VALUE</span>
              <h3>Insomniac Special</h3>
              <ul class="bundle-items">
                <li>5 milks (any combination)</li>
                <li>6 cookies</li>
                <li>Free delivery on this bundle</li>
              </ul>
              <div class="bundle-price">‚Çπ4400 <span>‚Çπ5300</span></div>
              <button class="add-to-cart" onclick="openBundleModal('Insomniac Special', 5, 6, 4400)">Customize Bundle</button>
            </div>
      
          </div>
        </div>
      </section>
      

    <!-- About Section -->
    <section class="about" id="about">
        <div class="container">
            <h2>about us</h2>
            <div class="about-content">
                <div class="about-quote">
                    "Some people sleep early.<br>
                    Some people come alive at night.<br><br>
                    We made this for the second kind."
                </div>
                <p>AfterHours is for people who are awake when the world is quiet. Night thinkers, creatives, students, and people unwinding after long days. We celebrate the minds that work differently.</p>
                <p style="margin-top: 20px;">We've gathered warm milk traditions from around the world, from Dutch anijsmelk to Indian kesar badam, and brought them to your door. Every drink tells a story. Every cookie is baked fresh. Every order is a ritual.</p>
            </div>
        </div>
    </section>

    <!-- Waitlist Section -->
    <section class="featured waitlist-section" id="waitlist">
        <div class="container">
            <h2>join the waitlist</h2>
            <p class="section-subtitle">be the first to know when we launch in your city</p>
            
            <div style="max-width: 600px; margin: 0 auto;">
                <form id="waitlistForm" style="background: var(--linen); padding: 50px; border-radius: 24px; box-shadow: 0 8px 30px rgba(90, 82, 69, 0.08);">
                    <div style="margin-bottom: 25px;">
                        <label style="display: block; color: var(--dark-neutral); font-weight: 400; margin-bottom: 10px; letter-spacing: 0.5px; text-transform: lowercase;">name</label>
                        <input type="text" id="waitlistName" required style="width: 100%; padding: 16px; border: 1.5px solid rgba(168, 150, 122, 0.2); border-radius: 16px; font-size: 15px;">
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <label style="display: block; color: var(--dark-neutral); font-weight: 400; margin-bottom: 10px; letter-spacing: 0.5px; text-transform: lowercase;">email</label>
                        <input type="email" id="waitlistEmail" required style="width: 100%; padding: 16px; border: 1.5px solid rgba(168, 150, 122, 0.2); border-radius: 16px; font-size: 15px;">
                    </div>
                    
                    <div style="margin-bottom: 30px;">
                        <label style="display: block; color: var(--dark-neutral); font-weight: 400; margin-bottom: 10px; letter-spacing: 0.5px; text-transform: lowercase;">phone (optional)</label>
                        <input type="tel" id="waitlistPhone" style="width: 100%; padding: 16px; border: 1.5px solid rgba(168, 150, 122, 0.2); border-radius: 16px; font-size: 15px;">
                    </div>
                    
                    <button type="submit" style="width: 100%; padding: 18px; background: var(--soft-brown); color: var(--cream); border: none; border-radius: 50px; font-size: 16px; font-weight: 400; cursor: pointer; transition: all 0.4s ease; letter-spacing: 1.5px; text-transform: lowercase;">
                        join the waitlist
                    </button>
                    
                    <div id="waitlistSuccess" style="display: none; margin-top: 25px; padding: 22px; background: rgba(181, 186, 163, 0.2); border-radius: 16px; text-align: center; color: var(--dark-neutral); font-weight: 300;">
                        <p style="font-size: 17px; font-weight: 400; margin-bottom: 8px;">‚úì you're on the list!</p>
                        <p>see you at midnight üåô</p>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="logo" style="margin-bottom: 25px; font-size: 22px;">afterhours </div>
            <p style="margin-bottom: 20px; font-weight: 300; opacity: 0.8;">late-night milk & cookies delivery at your doorstep</p>
            
            <div class="footer-links">
                <a href="#shop">Shop</a>
                <a href="#bundles">Bundles</a>
                <a href="#about">About</a>
                <a href="#waitlist">Waitlist</a>
                <a href="#">Instagram</a>
                <a href="#">Contact</a>
            </div>
            
            <p style="margin-top: 45px; opacity: 0.5; font-size: 13px; font-weight: 300;">¬© 2026 afterhours ¬∑ for quiet nights</p>
        </div>
    </footer>

    

    <!-- Cart Sidebar -->
    <div class="cart-overlay" id="cartOverlay" onclick="toggleCart()"></div>
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>Your Cart</h3>
            <button class="close-cart" onclick="toggleCart()">√ó</button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="empty-cart">
                <p style="font-size: 48px; margin-bottom: 15px;">ü•õ</p>
                <p>Your cart is empty</p>
                <p style="font-size: 14px; margin-top: 10px;">Add some comfort to your night</p>
            </div>
        </div>
        <div class="cart-footer" id="cartFooter" style="display: none;">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cartTotal">$0</span>
            </div>
            <button class="checkout-btn" onclick="checkout()">Proceed to Checkout</button>
        </div>
    </div>

    <!-- Bundle Customization Modal -->
    <div class="bundle-modal" id="bundleModal">
        <div class="bundle-modal-content">
            <div class="bundle-modal-header">
                <h3 id="bundleModalTitle"></h3>
                <button class="close-modal" onclick="closeBundleModal()">√ó</button>
            </div>
            
            <div class="bundle-selection">
                <h4>Choose Your Milks <span class="selected-count" id="milkCount">0/0</span></h4>
                <div class="milk-selection-grid" id="milkSelectionGrid"></div>
                <div class="selection-error" id="milkError" style="display: none;"></div>
            </div>

            <div id="customizationOptions"></div>

            <div class="bundle-modal-footer">
                <div class="bundle-total" id="bundleModalPrice"></div>
                <button class="add-bundle-btn" id="addBundleBtn" onclick="addCustomizedBundle()">Add to Cart</button>
            </div>
        </div>
    </div>

    <script>

// ---------- Cart helpers ----------
function toggleCart(forceOpen) {
  const sidebar = document.getElementById("cartSidebar");
  const overlay = document.getElementById("cartOverlay");
  if (!sidebar || !overlay) return;

  if (typeof forceOpen === "boolean") {
    sidebar.classList.toggle("open", forceOpen);
    overlay.classList.toggle("active", forceOpen);
    return;
  }

  sidebar.classList.toggle("open");
  overlay.classList.toggle("active");
}

function checkout() {
  if (cart.length === 0) return;

  // close cart
  toggleCart(false);

  // scroll to waitlist
  setTimeout(() => {
    const waitlistSection = document.getElementById("waitlist");
    waitlistSection?.scrollIntoView({ behavior: "smooth", block: "start" });
  }, 250);
}

// optional: close on Escape
document.addEventListener("keydown", (e) => {
  if (e.key === "Escape") {
    toggleCart(false);
    document.getElementById("bundleModal")?.classList.remove("active");
  }
});


        // Product Data (all 200ml)
        const products = [
          {
            id: 1,
            name: "Anijsmelk",
            displayName: "Anijsmelk (Anise Seed Milk)",
            icon: "üåø",
            origin: "Netherlands",
            description: "Warm milk gently infused with aromatic anise seeds.",
            wellness: "Anise is loved for its calming aroma and gentle digestive comfort.",
            price: 700,
            image: "assets/anijsmelk1.PNG",
            volume: "200ml"
          },
          {
            id: 2,
            name: "Classic Creamy Milk",
            displayName: "Classic Creamy Milk",
            icon: "ü•õ",
            origin: "House Classic",
            description: "Silky, slow-warmed milk with a rich, creamy finish. Simple, nostalgic, perfect with cookies.",
            wellness: "Warm milk is a classic night ritual. Comforting, gentle, and the cleanest pairing for anything sweet.",
            price: 700,
            image: "assets/classic.png",
            volume: "200ml"
          },
          {
            id: 3,
            name: "Cinnamon Milk",
            displayName: "Cinnamon Milk",
            icon: "üåô",
            origin: "Global Comfort Tradition",
            description: "Pure milk delicately spiced with Ceylon cinnamon sticks.",
            wellness: "Cinnamon‚Äôs warm aroma has been a bedtime companion across cultures for generations.",
            price: 700,
            image: "assets/cinnamon.PNG",
            volume: "200ml"
          },
          {
            id: 4,
            name: "Horchata-Style",
            displayName: "Horchata-Style Milk",
            icon: "üåæ",
            origin: "Mexico",
            description: "Creamy rice-based milk kissed with cinnamon and vanilla bean.",
            wellness: "Light yet indulgent, with a naturally sweet, aromatic finish.",
            price: 700,
            image: "assets/horchata.PNG",
            volume: "200ml"
          },
          {
            id: 5,
            name: "Signature Cookie",
            displayName: "Signature Chocolate Chip Cookie",
            icon: "üç™",
            origin: "Baked Fresh Daily",
            description: "Soft, warm chocolate chip cookie with real butter and chocolate chunks.",
            wellness: "Real ingredients, no shortcuts, just comfort in every bite.",
            price: 150,
            image: "assets/cookies.PNG"
          }
        ];
      
        // Load Products (THIS was missing)
        function loadProducts() {
          const grid = document.getElementById("productGrid");
          if (!grid) return;
      
          grid.innerHTML = products
            .map((product) => {
              const isCookie = product.id === 5;
      
              return `
                <div class="product-card">
                  <div class="product-image">
                    ${product.image
                      ? `<img src="${product.image}" alt="${product.displayName}">`
                      : `<span class="product-icon" style="font-size:110px;">${product.icon || "ü•õ"}</span>`
                    }
                  </div>
      
                  <div class="product-content">
                    <h3>${product.displayName}</h3>
                    <p class="product-origin">${product.origin}${product.volume ? " ¬∑ " + product.volume : ""}</p>
      
                    <p class="product-description">${product.description}</p>
      
                    <div class="wellness-note">
                      <strong></strong> ${product.wellness}
                    </div>
      
                    <div class="product-price">‚Çπ${product.price}</div>

      
                    ${!isCookie ? `
                      <div class="product-options">
                        <label class="option-label">Temperature:</label>
                        <div class="temp-selector">
                          <button class="option-btn active" onclick="selectTemp(${product.id}, 'hot', this)">‚òÄÔ∏è Hot</button>
                          <button class="option-btn" onclick="selectTemp(${product.id}, 'cold', this)">‚ùÑÔ∏è Cold</button>
                        </div>
      
                        <label class="option-label">Sweetness:</label>
                        <div class="sweetness-selector">
                          <button class="option-btn" onclick="selectSweetness(${product.id}, 'light', this)">Light</button>
                          <button class="option-btn active" onclick="selectSweetness(${product.id}, 'regular', this)">Regular</button>
                       
                        </div>
                      </div>
                    ` : ""}
      
                    <button class="add-to-cart" onclick="addToCart(${product.id}, event)">Add to Cart</button>
                  </div>
                </div>
              `;
            })
            .join("");
        }
      
        // Select Temperature
        function selectTemp(productId, temp, btn) {
          const group = btn.parentElement;
          group.querySelectorAll(".option-btn").forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
        }
      
        // Select Sweetness
        function selectSweetness(productId, level, btn) {
          const group = btn.parentElement;
          group.querySelectorAll(".option-btn").forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
        }
      
        // Cart notification
        function showCartNotification() {
          const notification = document.getElementById("cartNotification");
          if (!notification) return;
          notification.classList.add("show");
          setTimeout(() => notification.classList.remove("show"), 2000);
        }
      
        // Add to Cart
        function addToCart(productId, event) {
          const button = event?.target;
          const product = products.find((p) => p.id === productId);
          if (!product) return;
      
          let temp = "hot";
          let sweetness = "regular";
      
          if (productId !== 5 && button) {
            const card = button.closest(".product-card");
            const tempBtn = card?.querySelector(".temp-selector .active");
            const sweetBtn = card?.querySelector(".sweetness-selector .active");
      
            temp = tempBtn?.textContent?.includes("Hot") ? "hot" : "cold";
            sweetness = (sweetBtn?.textContent || "regular").toLowerCase();
          }
      
          cart.push({
            ...product,
            temp,
            sweetness,
            qty: 1,
            cartId: Date.now()
          });
      
          updateCart();
      
          if (button) {
            button.classList.add("added");
            setTimeout(() => button.classList.remove("added"), 300);
          }
      
          showCartNotification();
        }
      
        // Open Bundle Modal
        function openBundleModal(name, milkCount, cookieCount, price) {
  currentBundle = {
    name,
    milkCount,
    cookieCount,
    price,
    selectedMilks: []
  };

  document.getElementById("bundleModalTitle").textContent = name;
  document.getElementById("bundleModalPrice").textContent = formatINR(price);
  document.getElementById("milkCount").textContent = `0/${milkCount}`;

  const milkProducts = products.filter((p) => p.id !== 5);
  const grid = document.getElementById("milkSelectionGrid");

  grid.innerHTML = milkProducts.map((milk) => `
  <div class="milk-select-card"
       data-milk-id="${milk.id}"
       onclick="toggleMilkSelection(${milk.id}, this)">
    <div class="milk-select-icon">${milk.icon || "ü•õ"}</div>
    <div class="milk-select-name">${milk.name}</div>
  </div>
`).join("");


  document.getElementById("customizationOptions").innerHTML = "";
  document.getElementById("milkError").style.display = "none";
  document.getElementById("bundleModal").classList.add("active");
}

        // Toggle Milk Selection (single correct version)
        function toggleMilkSelection(milkId, cardEl) {
  const index = currentBundle.selectedMilks.findIndex((m) => m.id === milkId);

  if (index > -1) {
    currentBundle.selectedMilks.splice(index, 1);
    cardEl.classList.remove("selected");
  } else {
    if (currentBundle.selectedMilks.length >= currentBundle.milkCount) {
      document.getElementById("milkError").textContent =
        `You can only select ${currentBundle.milkCount} milks for this bundle`;
      document.getElementById("milkError").style.display = "block";
      return;
    }

    const milk = products.find((p) => p.id === milkId);
    currentBundle.selectedMilks.push({
      id: milkId,
      name: milk.name,
      icon: milk.icon || "ü•õ",
      temp: "hot",
      sweetness: "regular",
    });

    cardEl.classList.add("selected");
  }

  document.getElementById("milkCount").textContent =
    `${currentBundle.selectedMilks.length}/${currentBundle.milkCount}`;

  document.getElementById("milkError").style.display = "none";
  updateCustomizationOptions();
}

      
        // Update Customization Options
        function updateCustomizationOptions() {
  const container = document.getElementById("customizationOptions");
  if (!container) return;

  if (currentBundle.selectedMilks.length === 0) {
    container.innerHTML = "";
    return;
  }

  container.innerHTML = currentBundle.selectedMilks
    .map((milk, index) => `
      <div class="bundle-customization">
        <div class="customization-title">${milk.icon || "ü•õ"} ${milk.name}</div>

        <label class="option-label" style="margin-top:10px;display:block;">Temperature:</label>
        <div class="bundle-temp-selector">
          <button class="option-btn ${milk.temp === "hot" ? "active" : ""}"
            onclick="updateBundleMilk(${index}, 'temp', 'hot', this)">‚òÄÔ∏è Hot</button>
          <button class="option-btn ${milk.temp === "cold" ? "active" : ""}"
            onclick="updateBundleMilk(${index}, 'temp', 'cold', this)">‚ùÑÔ∏è Cold</button>
        </div>

        <label class="option-label" style="margin-top:10px;display:block;">Sweetness:</label>
        <div class="bundle-sweet-selector">
          <button class="option-btn ${milk.sweetness === "light" ? "active" : ""}"
            onclick="updateBundleMilk(${index}, 'sweetness', 'light', this)">Light</button>
          <button class="option-btn ${milk.sweetness === "regular" ? "active" : ""}"
            onclick="updateBundleMilk(${index}, 'sweetness', 'regular', this)">Regular</button>
        </div>

        <button class="edit-link" style="margin-top:10px;" onclick="removeMilkFromBundle(${index})">
          remove this milk
        </button>
      </div>
    `)
    .join("");
}

// ---------- GLOBALS ----------
let cart = [];
let currentBundle = {
  name: "",
  milkCount: 0,
  cookieCount: 0,
  price: 0,
  selectedMilks: [],
};
window.__editingBundleCartId = null;

const DELIVERY_FEE = 80;

function formatINR(amount) {
  return `‚Çπ${Number(amount).toLocaleString("en-IN")}`;
}

function ensureQty(item) {
  if (!item.qty || item.qty < 1) item.qty = 1;
}

// ---------- CART ----------
function removeFromCart(cartId) {
  cart = cart.filter((item) => item.cartId !== cartId);
  updateCart();
}

function changeQty(cartId, delta) {
  const item = cart.find((i) => i.cartId === cartId);
  if (!item) return;

  ensureQty(item);
  item.qty += delta;

  if (item.qty <= 0) {
    removeFromCart(cartId);
    return;
  }
  updateCart();
}

function setMilkOption(cartId, key, value) {
  const item = cart.find((i) => i.cartId === cartId);
  if (!item || item.isBundle) return;

  item[key] = value;
  updateCart();
}

function updateCart() {
  const cartCount = document.getElementById("cartCount");
  const cartItems = document.getElementById("cartItems");
  const cartFooter = document.getElementById("cartFooter");
  if (!cartCount || !cartItems || !cartFooter) return;

  cart.forEach(ensureQty);

  const totalItems = cart.reduce((sum, i) => sum + (i.qty || 1), 0);
  cartCount.textContent = totalItems;

  if (cart.length === 0) {
    cartItems.innerHTML = `
      <div class="empty-cart">
        <p style="font-size:48px;margin-bottom:15px;">ü•õ</p>
        <p>Your cart is empty</p>
        <p style="font-size:14px;margin-top:10px;">Add some comfort to your night</p>
      </div>
    `;
    cartFooter.style.display = "none";
    return;
  }

  cartItems.innerHTML = cart
    .map((item) => {
      const title = `${item.icon || "üì¶"} ${item.displayName || item.name}`;

      const details = !item.isBundle
        ? `
        <p class="cart-item-details">
          ${(item.temp || "").charAt(0).toUpperCase() + (item.temp || "").slice(1)}
          ${(item.sweetness
            ? " ¬∑ " + item.sweetness.charAt(0).toUpperCase() + item.sweetness.slice(1)
            : "")}
        </p>

        <div class="mini-edit" style="margin-top:10px;">
          <button class="mini-pill ${item.temp === "hot" ? "active" : ""}" onclick="setMilkOption(${item.cartId}, 'temp', 'hot')">‚òÄÔ∏è Hot</button>
          <button class="mini-pill ${item.temp === "cold" ? "active" : ""}" onclick="setMilkOption(${item.cartId}, 'temp', 'cold')">‚ùÑÔ∏è Cold</button>
          <button class="mini-pill ${item.sweetness === "light" ? "active" : ""}" onclick="setMilkOption(${item.cartId}, 'sweetness', 'light')">Light</button>
          <button class="mini-pill ${item.sweetness === "regular" ? "active" : ""}" onclick="setMilkOption(${item.cartId}, 'sweetness', 'regular')">Regular</button>
        </div>
      `
        : `
        <div class="cart-item-details">
          ${(item.bundleDetails?.milks || [])
            .map(
              (m) => `<div style="margin:5px 0;font-size:12px;">
              ${m.icon || "ü•õ"} ${m.name} - ${m.temp} ¬∑ ${m.sweetness}
            </div>`
            )
            .join("")}

          <div style="margin-top:8px;font-size:12px;">
            + ${item.bundleDetails?.cookies || 0} cookies üç™
          </div>

          <button class="edit-link" style="margin-top:10px;" onclick="editBundleFromCart(${item.cartId})">
            edit
          </button>
        </div>
      `;

      const itemTotal = (item.price || 0) * (item.qty || 1);

      return `
      <div class="cart-item">
        <h4>${title}</h4>
        ${details}

        <div class="cart-controls">
          <div class="qty-control">
            <button class="qty-btn" onclick="changeQty(${item.cartId}, -1)">‚àí</button>
            <div class="qty-num">${item.qty || 1}</div>
            <button class="qty-btn" onclick="changeQty(${item.cartId}, 1)">+</button>
          </div>

          <div class="cart-item-price" style="margin-top:0; flex:1;">
            <span>${formatINR(itemTotal)}</span>
            <button class="remove-item" onclick="removeFromCart(${item.cartId})">Remove</button>
          </div>
        </div>
      </div>
    `;
    })
    .join("");

  const subtotal = cart.reduce((sum, item) => sum + item.price * (item.qty || 1), 0);
  const delivery = subtotal > 0 ? DELIVERY_FEE : 0;
  const total = subtotal + delivery;

  cartFooter.innerHTML = `
    <div style="display:flex;justify-content:space-between;font-size:14px;margin-bottom:6px;">
      <span>Subtotal</span>
      <span>${formatINR(subtotal)}</span>
    </div>

    <div style="display:flex;justify-content:space-between;font-size:14px;margin-bottom:12px;">
      <span>Delivery</span>
      <span>${formatINR(delivery)}</span>
    </div>

    <div class="cart-total">
      <span>Total:</span>
      <span>${formatINR(total)}</span>
    </div>

    <button class="checkout-btn" onclick="checkout()">Proceed to Checkout</button>
  `;

  cartFooter.style.display = "block";
}

window.updateCart = updateCart;

// ---------- BUNDLE MODAL HELPERS ----------
function removeMilkFromBundle(index) {
  currentBundle.selectedMilks.splice(index, 1);

  const countEl = document.getElementById("milkCount");
  if (countEl) {
    countEl.textContent = `${currentBundle.selectedMilks.length}/${currentBundle.milkCount}`;
  }

  document.querySelectorAll(".milk-select-card").forEach((card) => {
    const milkId = Number(card.dataset.milkId);
    const selected = currentBundle.selectedMilks.some((m) => m.id === milkId);
    card.classList.toggle("selected", selected);
  });

  const err = document.getElementById("milkError");
  if (err) err.style.display = "none";

  updateCustomizationOptions();
}

function updateBundleMilk(index, property, value, btnEl) {
  const milk = currentBundle.selectedMilks[index];
  if (!milk) return;

  milk[property] = value;

  const group = btnEl?.parentElement;
  if (!group) return;

  group.querySelectorAll(".option-btn").forEach((b) => b.classList.remove("active"));
  btnEl.classList.add("active");
}

function closeBundleModal() {
  document.getElementById("bundleModal")?.classList.remove("active");
  window.__editingBundleCartId = null;

  const btn = document.getElementById("addBundleBtn");
  if (btn) btn.textContent = "Add to Cart";
}
window.closeBundleModal = closeBundleModal;

function addCustomizedBundle() {
  const err = document.getElementById("milkError");

  if (currentBundle.selectedMilks.length !== currentBundle.milkCount) {
    if (err) {
      err.textContent = `Please select exactly ${currentBundle.milkCount} milks`;
      err.style.display = "block";
    }
    return;
  }

  const bundleDetails = {
    milks: currentBundle.selectedMilks.map((m) => ({
      id: m.id,
      name: m.name,
      icon: m.icon || "ü•õ",
      temp: m.temp || "hot",
      sweetness: m.sweetness || "regular",
    })),
    cookies: currentBundle.cookieCount,
  };

  // EDIT EXISTING
  if (window.__editingBundleCartId) {
    const item = cart.find((i) => i.cartId === window.__editingBundleCartId);
    if (item) {
      item.bundleDetails = bundleDetails;
      item.name = currentBundle.name;
      item.price = currentBundle.price;
    }

    updateCart();
    closeBundleModal();
    showCartNotification();
    return;
  }

  // ADD NEW
  cart.push({
    id: "bundle",
    name: currentBundle.name,
    price: currentBundle.price,
    qty: 1,
    cartId: Date.now(),
    isBundle: true,
    bundleDetails,
  });

  updateCart();
  closeBundleModal();
  showCartNotification();
  setTimeout(() => toggleCart(true), 350);
}

// ---------- EDIT BUNDLE FROM CART ----------
function editBundleFromCart(cartId) {
  const item = cart.find((i) => i.cartId === cartId);
  if (!item || !item.isBundle) return;

  currentBundle = {
    name: item.name,
    milkCount: item.bundleDetails?.milks?.length || 0,
    cookieCount: item.bundleDetails?.cookies || 0,
    price: item.price,
    selectedMilks: (item.bundleDetails?.milks || []).map((m) => ({
      id: m.id,
      name: m.name,
      icon: m.icon || "ü•õ",
      temp: m.temp || "hot",
      sweetness: m.sweetness || "regular",
    })),
  };

  window.__editingBundleCartId = cartId;

  document.getElementById("bundleModalTitle").textContent = currentBundle.name;
  document.getElementById("bundleModalPrice").textContent = formatINR(currentBundle.price);
  document.getElementById("milkCount").textContent = `${currentBundle.selectedMilks.length}/${currentBundle.milkCount}`;

  const milkProducts = products.filter((p) => p.id !== 5);
  const grid = document.getElementById("milkSelectionGrid");

  grid.innerHTML = milkProducts
    .map((milk) => {
      const selected = currentBundle.selectedMilks.some((m) => m.id === milk.id);
      return `
      <div class="milk-select-card ${selected ? "selected" : ""}"
           data-milk-id="${milk.id}"
           onclick="toggleMilkSelection(${milk.id}, this)">
        <div class="milk-select-icon">${milk.icon || "ü•õ"}</div>
        <div class="milk-select-name">${milk.name}</div>
      </div>
    `;
    })
    .join("");

  const milkError = document.getElementById("milkError");
  if (milkError) milkError.style.display = "none";

  updateCustomizationOptions();

  const btn = document.getElementById("addBundleBtn");
  if (btn) btn.textContent = "Save Changes";

  document.getElementById("bundleModal").classList.add("active");
}
window.editBundleFromCart = editBundleFromCart;

      
        // Waitlist form
        document.addEventListener("DOMContentLoaded", () => {
          loadProducts();
      
          const waitlistForm = document.getElementById("waitlistForm");
          waitlistForm?.addEventListener("submit", (e) => {
            e.preventDefault();
            document.getElementById("waitlistSuccess").style.display = "block";
            waitlistForm.reset();
            setTimeout(() => {
              document.getElementById("waitlistSuccess").style.display = "none";
            }, 5000);
          });
      
          // Smooth scroll
          document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
            anchor.addEventListener("click", function (e) {
              e.preventDefault();
              const target = document.querySelector(this.getAttribute("href"));
              target?.scrollIntoView({ behavior: "smooth", block: "start" });
            });
          });
        });

        console.log("JS loaded");

      </script>
      
    
</body>
</html>
